## ğŸ§± DATA STRUCTURE OVERVIEW

### Entities and relationships:

```
Course
 â”œâ”€ Chapters[]
 â”‚    â”œâ”€ Homeworks[]
 â”‚    â””â”€ TableOfContents[]
```

So:

- **One course** â†’ many **chapters**
- **One chapter** â†’ many **homeworks**
- **Each course** â†’ has a table of contents for easy navigation

---

## ğŸ“¦ Mongoose Schemas

### 1ï¸âƒ£ Course Schema

```ts
// models/Course.js
import mongoose from "mongoose";

const CourseSchema = new mongoose.Schema(
  {
    name: { type: String, required: true }, // e.g. "C++"
    author: { type: String, required: true }, // e.g. "áƒ¡áƒáƒ”áƒšáƒ˜ áƒ’áƒ•áƒáƒ áƒ˜"
    sectionCount: { type: Number, required: true }, // how many chapters
    description: { type: String },
  },
  { timestamps: true }
);

export default mongoose.model("Course", CourseSchema);
```

---

### 2ï¸âƒ£ Chapter Schema

```ts
// models/Chapter.js
import mongoose from "mongoose";

const ChapterSchema = new mongoose.Schema(
  {
    course: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "Course",
      required: true,
    },
    chapterNumber: { type: String, required: true }, // e.g. "2.2"
    chapterTitle: { type: String, required: true }, // e.g. "HTML-áƒ˜áƒ¡ áƒ¡áƒáƒ¤áƒ£áƒ«áƒ•áƒšáƒ”áƒ‘áƒ˜"
    chapterIndex: { type: Number, required: true }, // e.g. 2
    sections: [
      {
        subTitle: String,
        description: String,
        imageUrl: String,
      },
    ],
  },
  { timestamps: true }
);

export default mongoose.model("Chapter", ChapterSchema);
```

---

### 3ï¸âƒ£ Homework Schema

```ts
// models/Homework.js
import mongoose from "mongoose";

const HomeworkSchema = new mongoose.Schema(
  {
    chapter: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "Chapter",
      required: true,
    },
    homeworkNumber: { type: Number, required: true }, // e.g. 1
    title: { type: String, required: true }, // "áƒ“áƒáƒ•áƒáƒšáƒ”áƒ‘áƒ #1"
    description: { type: String, required: false },
    help: { type: String, required: false },
    answer: { type: String, required: false },
  },
  { timestamps: true }
);

export default mongoose.model("Homework", HomeworkSchema);
```

---

### 4ï¸âƒ£ Table of Contents Schema

```ts
// models/TableOfContents.js
import mongoose from "mongoose";

const TocItemSchema = new mongoose.Schema({
  title: String, // "áƒ—áƒáƒ•áƒ˜ 01: áƒ¨áƒ”áƒ¡áƒáƒ•áƒáƒšáƒ˜ áƒ•áƒ”áƒ‘ áƒ¡áƒáƒ›áƒ§áƒáƒ áƒáƒ¨áƒ˜"
  sections: [String], // ["1.1 áƒ áƒ áƒáƒ áƒ˜áƒ¡ áƒ˜áƒœáƒ¢áƒ”áƒ áƒœáƒ”áƒ¢áƒ˜?", "1.2 áƒ áƒ áƒáƒ áƒ˜áƒ¡ áƒ•áƒ”áƒ‘áƒ¡áƒáƒ˜áƒ¢áƒ˜ áƒ“áƒ áƒ‘áƒ áƒáƒ£áƒ–áƒ”áƒ áƒ˜?"]
});

const TableOfContentsSchema = new mongoose.Schema(
  {
    course: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "Course",
      required: true,
    },
    items: [TocItemSchema],
  },
  { timestamps: true }
);

export default mongoose.model("TableOfContents", TableOfContentsSchema);
```

---

## ğŸš EXPRESS ROUTES STRUCTURE

### ğŸ”¹ `/courses`

| Method   | Endpoint             | Description       |
| -------- | -------------------- | ----------------- |
| `GET`    | `/courses`           | Get all courses   |
| `POST`   | `/courses`           | Create new course |
| `GET`    | `/courses/:courseId` | Get single course |
| `PATCH`  | `/courses/:courseId` | Update course     |
| `DELETE` | `/courses/:courseId` | Delete course     |

---

### ğŸ”¹ `/courses/:courseId/chapters`

| Method   | Endpoint                                 | Description                   |
| -------- | ---------------------------------------- | ----------------------------- |
| `GET`    | `/courses/:courseId/chapters`            | Get all chapters for a course |
| `POST`   | `/courses/:courseId/chapters`            | Create a chapter              |
| `GET`    | `/courses/:courseId/chapters/:chapterId` | Get single chapter            |
| `PATCH`  | `/courses/:courseId/chapters/:chapterId` | Update chapter                |
| `DELETE` | `/courses/:courseId/chapters/:chapterId` | Delete chapter                |

---

### ğŸ”¹ `/courses/:courseId/chapters/:chapterId/homeworks`

| Method   | Endpoint                                                       | Description                        |
| -------- | -------------------------------------------------------------- | ---------------------------------- |
| `GET`    | `/courses/:courseId/chapters/:chapterId/homeworks`             | Get all homeworks for that chapter |
| `POST`   | `/courses/:courseId/chapters/:chapterId/homeworks`             | Create homework                    |
| `GET`    | `/courses/:courseId/chapters/:chapterId/homeworks/:homeworkId` | Get one homework                   |
| `PATCH`  | `/courses/:courseId/chapters/:chapterId/homeworks/:homeworkId` | Update homework                    |
| `DELETE` | `/courses/:courseId/chapters/:chapterId/homeworks/:homeworkId` | Delete homework                    |

---

### ğŸ”¹ `/courses/:courseId/toc` â€” Table of Contents

| Method | Endpoint                 | Description               |
| ------ | ------------------------ | ------------------------- |
| `GET`  | `/courses/:courseId/toc` | Get the table of contents |
| `POST` | `/courses/:courseId/toc` | Create or update the TOC  |

---

## ğŸ“˜ Example Data Flow

**Course:**
â†’ â€œC++â€ (10 sections)

**Chapters:**
â†’ `/courses/cpp/chapters/1` = áƒ¨áƒ”áƒ¡áƒáƒ•áƒáƒšáƒ˜
â†’ `/courses/cpp/chapters/2.2` = HTML-áƒ˜áƒ¡ áƒ¡áƒáƒ¤áƒ£áƒ«áƒ•áƒšáƒ”áƒ‘áƒ˜

**Homeworks:**
â†’ `/courses/cpp/chapters/2.2/homeworks/1` = áƒ“áƒáƒ•áƒáƒšáƒ”áƒ‘áƒ #1

**Table of Contents:**
â†’ `/courses/cpp/toc` = Holds all chapter titles and sub-sections

---

## ğŸ§  Example Course with Links

```
Course: "C++"
Author: "áƒ¡áƒáƒ”áƒšáƒ˜ áƒ’áƒ•áƒáƒ áƒ˜"
Sections: 10

â””â”€â”€ Chapter 01: áƒ¨áƒ”áƒ¡áƒáƒ•áƒáƒšáƒ˜ áƒ•áƒ”áƒ‘ áƒ¡áƒáƒ›áƒ§áƒáƒ áƒáƒ¨áƒ˜
â”‚     â”œâ”€â”€ 1.1 áƒ áƒ áƒáƒ áƒ˜áƒ¡ áƒ˜áƒœáƒ¢áƒ”áƒ áƒœáƒ”áƒ¢áƒ˜?
â”‚     â”œâ”€â”€ 1.2 áƒ áƒ áƒáƒ áƒ˜áƒ¡ áƒ•áƒ”áƒ‘áƒ¡áƒáƒ˜áƒ¢áƒ˜ áƒ“áƒ áƒ‘áƒ áƒáƒ£áƒ–áƒ”áƒ áƒ˜?
â”‚     â””â”€â”€ Homework #1: áƒáƒ˜áƒ áƒ•áƒ”áƒšáƒ˜ áƒ“áƒáƒ•áƒáƒšáƒ”áƒ‘áƒ
â””â”€â”€ Chapter 02: HTML-áƒ˜áƒ¡ áƒ¡áƒáƒ¤áƒ£áƒ«áƒ•áƒšáƒ”áƒ‘áƒ˜
      â”œâ”€â”€ 2.1 HTML-áƒ˜áƒ¡ áƒ“áƒáƒ™áƒ£áƒ›áƒ”áƒœáƒ¢áƒ˜áƒ¡ áƒ¡áƒ¢áƒ áƒ£áƒ¥áƒ¢áƒ£áƒ áƒ
      â”œâ”€â”€ 2.2 áƒ’áƒ•áƒ”áƒ áƒ“áƒ˜áƒ¡ áƒ£áƒ®áƒ˜áƒšáƒáƒ•áƒ˜ áƒœáƒáƒ¬áƒ˜áƒšáƒ˜
      â””â”€â”€ Homework #2: HTML file setup
```

---
